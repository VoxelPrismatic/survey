<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="preload" src="/prizm.dev/assets/css/ubuntu/Ubuntu-B.ttf" type="font/sfnt" as="font"/>
        <link rel="preload" src="/prizm.dev/assets/css/ubuntu/Ubuntu-R.ttf" type="font/sfnt" as="font"/>
        <style type="text/css">
            body {
                height: 99vh;
                font-family: "Ubuntu";
                background-color: #111;
                color: #fff;
            }
            div#box {
                width: 100%;
                height: 90%;
                text-align: center;
            }
            button:not(#reset) {
                width: 30%;
                height: 90%;
                border: 8px solid;
                border-radius: 16px;
                font-weight: bold;
                font-size: 500%;
                color: #fff;
            }
            button#good {
                border-color: #0f0;
                background-color: #141;
            }
            button#okay {
                border-color: #ff0;
                background-color: #441;
            }
            button#poor {
                border-color: #f00;
                background-color: #411;
            }
            progress {
                width: 80%;
            }
            button#reset {
                flex: 0 0 48px;
                border: #fff 2px solid;
                border-radius: 4px;
                color: #000;
                background-color: #ccc;
                height: 12px;
            }
            span#values {
                flex: 0 0 56px;
            }
@font-face {
    font-family: "Ubuntu";
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: local("Ubuntu"), local("Ubuntu"), local("Ubuntu-R"), local("Ubuntu"), url("/prizm.dev/assets/css/ubuntu/Ubuntu-R.ttf");
} @font-face {
    font-family: "Ubuntu";
    font-style: normal;
    font-weight: 700;
    font-display: swap;
    src: local("Ubuntu Bold"), local("Ubuntu-Bold"), local("Ubuntu-B"), local("Ubuntu"), url("/prizm.dev/assets/css/ubuntu/Ubuntu-B.ttf");
}
        </style>
    </head>
    <body>
        <div id="box">
            <button id="good" onclick="good++;do_math();">:)</button>
            <button id="okay" onclick="okay++;do_math();">:|</button>
            <button id="poor" onclick="poor++;do_math();">:(</button>
            <div style="display:flex;width:90%;margin:auto;">
                <button id="reset" onclick="if(confirm('Reset data?')){good=0;okay=0;poor=0;do_math();}">reset</button>
                <progress id="bar" max="100" style="transform:scale(-1,1);"></progress>
                <span id="values">0/0/0 - 0%</span>
            </div>
        </div>
        <script type="text/javascript">
            function $(q,e=document){return e.querySelector(q);}
            var good = 0;
            var okay = 0;
            var poor = 0;
            if(Number(new Date()) - (Number(localStorage.getItem("survey_time")) || 0) < 36000000) {
                good = Number(localStorage.getItem("survey_good"));
                okay = Number(localStorage.getItem("survey_okay"));
                poor = Number(localStorage.getItem("survey_poor"));
            }
            function do_math() {
                localStorage.setItem("survey_good", good);
                localStorage.setItem("survey_okay", okay);
                localStorage.setItem("survey_poor", poor);
                localStorage.setItem("survey_time", Number(new Date()));
                value = (good * 100 + okay * 50 + poor * 0) / (good + okay + poor);
                $("#bar").value = value;
                $("#values").innerHTML = good + "/" + okay + "/" + poor + " - " + (Math.round(value * 100) / 100) + "%";
            }
            do_math();
            window.ontouch = (evt) => {evt.preventDefault();}
        </script>
    </body>
</html>
